<div class="p-4 border-b">
  <ng-container *ngIf="originalMessage$ | async as msg">
    <div class="font-bold">{{ msg.sender }}</div>
    <div class="text-sm text-gray-600">
      {{ msg.createdAt?.toDate() | date : "short" }}
    </div>
    <div class="mt-2 p-3 bg-gray-100 rounded">{{ msg.text }}</div>
  </ng-container>
</div>

<div class="p-4 space-y-3 overflow-auto h-[60vh]">
  <div *ngFor="let reply of threadMessages$ | async">
    <div class="flex items-center gap-2">
      <div class="font-semibold">{{ reply.sender }}</div>
      <div class="text-xs text-gray-500">
        {{ reply.createdAt?.toDate() | date : "HH:mm" }}
      </div>
    </div>
    <div class="ml-8 p-2 bg-white rounded shadow-sm">{{ reply.text }}</div>
  </div>
</div>

<form (ngSubmit)="sendThread()" class="p-4 flex gap-2 border-t">
  <input
    [(ngModel)]="threadText"
    name="threadText"
    placeholder="Write a replyâ€¦"
    class="flex-1 p-2 border rounded"
  />
  <button
    type="submit"
    class="px-4 py-2 bg-blue-500 text-white rounded disabled:opacity-50"
    [disabled]="!threadText.trim()"
  >
    Send
  </button>
</form>
