<div
  class="login-page container mx-auto p-5 flex flex-col items-center min-h-screen relative"
>
  <div
    class="logo-container flex items-center w-full max-w-[1920px]"
    [ngClass]="{
      'mt-[75px] justify-between medShort:mt-[20px]': !isMobile,
      'justify-center mt-20px': isMobile
    }"
  >
    <div class="logo flex items-center gap-2">
      <img
        src="assets/img/logo.svg"
        alt="DABubble Logo"
        class="w-16 h-auto"
        style="view-transition-name: app-logo"
      />
      <p class="text-2xl font-bold">DABubble</p>
    </div>

    <div
      class="register-link-destop text-[18px] text-center"
      [ngClass]="isMobile ? 'hidden' : 'flex'"
    >
      <div class="text-lg">
        <p>Neu bei DABubble?</p>
        <a routerLink="/register" class="text-[#797EF3] hover:text-[#444DF2]">
          Konto erstellen
        </a>
      </div>
    </div>
  </div>

  <div
    class="login-container container mx-auto md:px-8 md:py-10 flex flex-col items-center justify-center mt-8 bg-white rounded-[30px] shadow-[0px_2px_10px_0px_#00000014] max-w-[606px]"
    [ngClass]="{ 'p-8': !isMobile, 'px-2 py-3': isMobile }"
  >
    <div
      class="flex flex-col items-center medShort:gap-1"
      [ngClass]="{
        'gap-8 w-[90%] mb-10': !isMobile,
        'gap-1 w-full mb-5': isMobile
      }"
    >
      <h1
        class="text-[#444DF2] font-bold"
        [ngClass]="{ 'text-[46px]': !isMobile, 'text-[32px]': isMobile }"
      >
        Anmeldung
      </h1>
      <p
        class="text-center"
        [ngClass]="{ 'px-7 text-xl': !isMobile, 'text-base': isMobile }"
      >
        Wir empfehlen dir, die E-Mail-Adresse zu nutzen, die du bei der Arbeit
        verwendest.
      </p>
    </div>

    <form
      #loginForm="ngForm"
      (ngSubmit)="onSubmit(loginForm)"
      class="flex justify-center flex-col gap-5 medShort:gap-1 w-[90%]"
    >
      <!-- Email Field -->
      <div>
        <div
          class="form-group form-group-input-div bg-[#edeefe] flex justify-center items-center rounded-full flex-col w-full p-4"
        >
          <div class="flex justify-center items-center w-full">
            <img
              src="assets/img/mail.svg"
              alt="Email"
              class="ml-5 mr-7 w-5 h-5"
            />
            <input
              class="w-full bg-[#edeefe] text-[18px] focus:outline-none placeholder:text-[#686868]"
              [ngClass]="{ 'text-lg': !isMobile, 'text-base': isMobile }"
              type="email"
              id="email"
              name="email"
              pattern="[^@]+@[^@]+\.[a-zA-Z]{2,6}"
              [(ngModel)]="credentials.email"
              #emailCtrl="ngModel"
              placeholder="beispielname@email.com"
              required
              email
            />
          </div>
        </div>
        <div
          class="error-messages h-6 p-2"
          [ngClass]="{ 'text-base': !isMobile, 'text-sm': isMobile }"
        >
          <p
            *ngIf="emailCtrl.errors?.required && emailCtrl.touched"
            class="text-[#ED1E79]"
          >
            Bitte geben Sie eine E-Mail-Adresse ein.
          </p>
          <p
            *ngIf="emailCtrl.errors?.pattern && emailCtrl.touched"
            class="text-[#ED1E79]"
          >
            Diese E-Mail-Adresse ist leider ungültig.
          </p>
        </div>
      </div>

      <!-- Password Field -->
      <div
        class="form-group flex justify-center items-center hover:border-solid flex-col w-full"
      >
        <div
          class="form-group-input-div bg-[#edeefe] hover:border-[#444DF2] flex justify-center items-center w-full py-4 rounded-full px-4"
        >
          <img
            src="assets/img/lock.svg"
            alt="Password"
            class="ml-5 mr-7 w-5 h-5"
          />
          <input
            class="w-full bg-[#edeefe] focus:outline-none placeholder:text-[#686868]"
            [ngClass]="{ 'text-lg': !isMobile, 'text-base': isMobile }"
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            name="password"
            [(ngModel)]="credentials.password"
            #pwCtrl="ngModel"
            placeholder="Passwort"
            required
          />
          <button
            type="button"
            (click)="togglePasswordVisibility()"
            class="mr-2 focus:outline-none"
            [attr.aria-label]="
              showPassword ? 'Passwort verbergen' : 'Passwort anzeigen'
            "
          >
            <img
              [src]="
                showPassword
                  ? 'assets/img/eye-icon-visibility.svg'
                  : 'assets/img/eye-icon-visibility-off.svg'
              "
              alt=""
              class="w-6 h-6"
              aria-hidden="true"
            />
          </button>
        </div>
        <div
          class="w-full h-6 p-2"
          [ngClass]="{ 'text-base': !isMobile, 'text-sm': isMobile }"
        >
          <p
            *ngIf="pwCtrl.errors?.required && pwCtrl.touched"
            class="text-[#ED1E79]"
          >
            Bitte geben Sie ein Passwort ein.
          </p>
          <p
            *ngIf="pwCtrl.errors?.incorrect && pwCtrl.touched"
            class="text-[#ED1E79]"
          >
            E-Mail oder Passwort sind falsch.
          </p>
        </div>
      </div>

      <div class="flex flex-col relative">
        <div class="form-group flex justify-center items-center">
          <a
            routerLink="/forgot-password"
            class="text-[#797EF3] hover:text-[#444DF2] hover:bg-[#ECEEFE] rounded-[30px] py-[5px] px-[15px] hover:font-medium transition-all duration-200"
            >Passwort vergessen?</a
          >
        </div>
      </div>

      <div class="flex w-full items-center justify-center gap-2 my-4">
        <span class="flex-auto h-px bg-[#ADB0D9]"></span>
        <span class="text-lg">ODER</span>
        <span class="flex-auto h-px bg-[#ADB0D9]"></span>
      </div>

      <!-- Google Login Button -->
      <div class="form-group flex justify-center items-center w-full">
        <button
          type="button"
          class="w-full flex items-center justify-center gap-[10px] rounded-[100px] px-[32px] py-[11px] bg-[#ECEEFE] border border-[#ECEEFE] hover:border-[#444DF2] text-[#444DF2] hover:font-bold transition-all duration-200"
          (click)="loginWithGoogle()"
        >
          <img
            src="assets/img/google-icon.svg"
            alt="Google"
            class="w-[38px] h-[38px]"
          />
          <span *ngIf="!loading">Anmelden mit Google</span>
          <span *ngIf="loading">Laden...</span>
        </button>
      </div>

      <!-- Action Buttons -->
      <div
        class="flex justify-center items-center w-full mt-4 font-bold"
        [ngClass]="isMobile ? 'gap-1 text-base' : 'gap-[30px] text-lg'"
      >
        <button
          type="submit"
          class="login-btn text-white rounded-full disabled:pointer-events-none disabled:bg-[#686868] disabled:cursor-default hover:bg-[#797EF3] bg-[#444DF2]"
          [ngClass]="isMobile ? 'py-3 px-3' : 'py-3 px-6'"
          [disabled]="loading || !loginForm.valid"
        >
          <span *ngIf="!loading">Anmelden</span>
          <span *ngIf="loading">Anmelden...</span>
        </button>
        <button
          type="button"
          (click)="guestLogin()"
          [disabled]="loading"
          class="guest-login-btn border text-[#444DF2] border-[#797EF3] hover:bg-[#535AF1] py-3 px-6 rounded-full disabled:pointer-events-none bg-white disabled:text-[#686868] disabled:border-[#686868] transition-all duration-200"
        >
          <span *ngIf="!loading">Gäste-Login</span>
          <span *ngIf="loading">Laden...</span>
        </button>
      </div>
    </form>
  </div>

  <div class="mt-6 text-center w-full" [ngClass]="isMobile ? 'flex' : 'hidden'">
    <div
      class="text-gray-600 w-full flex gap-5 flex-col justify-center items-center"
    >
      <p>Neu bei DABubble?</p>
      <a
        routerLink="/register"
        class="text-blue-700 border border-blue-700 rounded-full py-2 px-4"
      >
        Konto erstellen
      </a>
    </div>
  </div>

  <!-- Footer Links -->
  <footer class="footer flex justify-center items-center gap-4 mt-auto mb-2">
    <a
      routerLink="/impressum"
      class="mt-8 px-[15px] py-[10px] text-[18px] font-medium border border-transparent text-[#797EF3] rounded-[30px] hover:border hover:border-[#ADB0D9] hover:text-[#444DF2] transition-colors duration-200"
    >
      Impressum
    </a>
    <a
      routerLink="/privacy-policy"
      class="mt-8 px-[15px] py-[10px] text-[18px] font-medium border border-transparent text-[#797EF3] rounded-[30px] hover:border hover:border-[#ADB0D9] hover:text-[#444DF2] transition-colors duration-200"
    >
      Datenschutz</a
    >
  </footer>
</div>
